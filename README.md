<!--
 * @Date: 2025-10-11 11:02:34
 * @LastEditors: BHM-Bob G 2262029386@qq.com
 * @LastEditTime: 2025-11-05 10:14:50
 * @Description: 
-->
# AdvancedFind - Edge浏览器高级搜索扩展

## 项目简介
AdvancedFind 是一个功能强大的Edge浏览器扩展，提供高级文本搜索功能，支持正则表达式、大小写敏感和全词匹配等选项，扩展浏览器自带的简单搜索功能。

## 测试与开发工具
项目包含完整的测试和开发工具集，方便功能开发和测试：

### 测试环境文件
- `test_environment.js`: 模拟浏览器环境和Chrome API，用于在Node.js中测试
- `test_search.js`: 测试搜索功能的核心测试脚本
- `test_runner.html`: 浏览器中的交互式测试界面
- `run_tests.js`: Node.js测试运行器，包含Node.js安装检测

### 使用方法

#### 1. 浏览器交互式测试
打开 `test_runner.html` 文件，可以在浏览器中直接测试和验证搜索功能：
- 输入搜索内容并选择相应的搜索选项
- 点击「执行搜索」按钮进行搜索
- 可以点击「运行所有测试」按钮运行预设的测试用例
- 每个测试用例都可以单独点击运行

#### 2. Node.js环境测试
使用Node.js运行测试脚本：

```bash
node run_tests.js
```

该脚本会：
- 自动检测系统是否安装了Node.js
- 如果未安装，显示安装指南
- 如果已安装，运行测试用例并显示结果

### Node.js安装检测
`run_tests.js` 脚本包含自动检测Node.js安装的功能：
- 检测Node.js是否已安装
- 验证版本是否满足要求（推荐v12或更高版本）
- 如果未安装，提供详细的安装指南

### 测试用例说明
当前预设的测试用例包括：
1. 基本搜索（不区分大小写）
2. 大小写敏感搜索
3. 全词匹配搜索
4. 正则表达式搜索（数字）
5. 正则表达式搜索（邮箱）
6. 无匹配搜索

## 开发指南

### 添加新的测试用例
可以在 `test_search.js` 或 `test_runner.html` 中添加新的测试用例，按照现有格式扩展测试集合。

### 修改测试环境
如果需要模拟更多的浏览器功能，可以修改 `test_environment.js` 中的相应模拟类。

### 调试提示
- 在浏览器测试中，可以通过「显示详细日志」选项查看详细的执行日志
- 在Node.js测试中，所有日志会输出到控制台
- 可以通过修改测试文件中的日志级别来调整输出的详细程度

一个扩展Edge浏览器自带搜索功能的高级搜索工具，实现类似VSCode的高级搜索体验。

## 功能特点

- 点击扩展图标弹出小型搜索界面
- 实时搜索网页中的文本内容
- 支持大小写匹配、全字匹配和正则表达式匹配
- 高亮显示所有匹配项
- 提供上一个/下一个匹配项导航功能
- 显示当前匹配索引与总匹配数

## 安装方法

1. 打开Edge浏览器
2. 在地址栏输入 `edge://extensions/` 并回车
3. 开启右上角的「开发者模式」开关
4. 点击「加载已解压的扩展程序」按钮
5. 选择本项目的文件夹（`e:\My_Progs\JS\EdgeExts\adv_find`）
6. 扩展安装完成，会显示在浏览器右上角的扩展栏中

## 使用方法

1. 点击浏览器右上角的AdvancedFind扩展图标
2. 在弹出的搜索框中输入要搜索的文本
3. 根据需要点击大小写匹配（Aa）、全字匹配（W）或正则表达式（.*）按钮
4. 使用上下箭头按钮导航到上一个或下一个匹配项
5. 当前匹配项会有特殊高亮显示，并自动滚动到视图中央
6. 点击关闭按钮或按ESC键关闭搜索界面

## 技术实现

- 使用Manifest V3标准开发
- 采用TreeWalker API高效遍历DOM树
- 实现了文本节点的精确分割和高亮显示
- 支持正则表达式搜索和匹配
- 优化了性能，避免重复初始化

## 开发说明

如果您想修改或扩展此扩展，可以编辑以下文件：

- `manifest.json` - 扩展的配置文件
- `background.js` - 处理扩展图标的点击事件
- `search.html` - 搜索界面的HTML结构
- `search.css` - 搜索界面的样式
- `search.js` - 搜索功能的核心逻辑

## 注意事项

- 正则表达式模式需要符合JavaScript正则语法
- 大文件或复杂页面可能会有短暂的性能延迟
- 搜索框会在按ESC键或点击关闭按钮时隐藏

---

版本: 1.0
发布日期: 2025-10-11